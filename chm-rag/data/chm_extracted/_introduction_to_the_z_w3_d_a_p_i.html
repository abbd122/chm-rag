<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="ZW3D"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZWAPIOPEN: Introduction to the ZW3D API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Zw3DLogo.ico"/></td>
  <td id="projectalign">
   <div id="projectname">ZWAPIOPEN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ZW3D&#160;Base</span></a></li>
      <li class="current"><a href="pages.html"><span>Introductions</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_z_w3_d_all_introduction.html">All Introductions</a></li><li class="navelem"><a class="el" href="_z_w3_d_traditional_introduction.html">Traditional Introductions</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Introduction to the ZW3D API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md17"></a>
Introduction</h1>
<hr  />
<p >The ZW3D API is a basic set of C functions for implementing custom commands and operations in ZW3D.</p>
<p >The ZW3D API is used to create DLL's that are dynamically loaded by ZW3D at runtime. Functions in a ZW3D API DLL may be invoked from the ZW3D user interface directly.</p>
<p >"Hello World" Example</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Example</h1>
<hr  />
<p >The following example shows how to create a ZW3D API DLL with a function that prints "Hello World" in the ZW3D message area.</p>
<p ><b>1</b>) Copy zw3d.lib from the ZW3D installation folder to a local folder (i.e. "MyFolder"). The path of the installation folder is listed under the "About..." option on the ZW3D "Help" pulldown menu.</p>
<p ><b>2</b>) Copy zwapi_**.h from the "api" folder to "MyFolder".</p>
<p ><b>3</b>) Create a simple text file named MyLib.c in "MyFolder" using Notepad or a similar text editor. Type the following code in the file. You may ignore the comments, which are included here for your instruction.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="zwapi__cmd_8h.html">zwapi_cmd.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="zwapi__message_8h.html">zwapi_message.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> MyFunction(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  * You must supply an initialization function whose name</span></div>
<div class="line"><span class="comment">  * is the name of your DLL suffixed with &quot;Init&quot; (MyLibInit).</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * This function is automatically called by ZW3D when it</span></div>
<div class="line"><span class="comment">  * loads your DLL at startup.</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * It should perform whatever initializations your DLL</span></div>
<div class="line"><span class="comment">  * requires, such as registering your callback functions.</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * The function must be declared with the arguments shown.</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * The function should return 0 if it is successful; 1 if it fails.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> MyLibInit(<span class="keywordtype">int</span> format, <span class="keywordtype">void</span> *data)</div>
<div class="line">{</div>
<div class="line"><span class="comment">/* register your function with ZW3D */</span></div>
<div class="line"><a class="code hl_function" href="group__zwapi__cmd_gac273a1d9868ad996470c1c9502fb061e.html#gac273a1d9868ad996470c1c9502fb061e">cvxCmdFunc</a>(<span class="stringliteral">&quot;MyFunction&quot;</span>,(<span class="keywordtype">void</span>*)MyFunction,VX_CODE_GENERAL);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span>(0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  * You must also supply an exit (i.e. cleanup) function whose</span></div>
<div class="line"><span class="comment">  * name is the name of your DLL suffixed with &quot;Exit&quot; (MyLibExit).</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * This function is automatically called by ZW3D during its</span></div>
<div class="line"><span class="comment">  * shutdown (i.e. exit) process.</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * It should perform whatever cleanup your DLL requires</span></div>
<div class="line"><span class="comment">  * before ZW3D is shutdown.</span></div>
<div class="line"><span class="comment">  *</span></div>
<div class="line"><span class="comment">  * This function should always return 0.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> MyLibExit(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"><span class="comment">/* put your cleanup code here */</span></div>
<div class="line"><a class="code hl_function" href="group__zwapi__cmd_ga79b1a42f1843987caa3d2f849cbc3c43.html#ga79b1a42f1843987caa3d2f849cbc3c43">cvxCmdFuncUnload</a>(<span class="stringliteral">&quot;MyFunction&quot;</span>);</div>
<div class="line"><span class="keywordflow">return</span>(0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  * This is the function registered in MyLibInit().</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> MyFunction(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"><a class="code hl_function" href="group__zwapi__message_gae01542303dce69c4a8a00695e484ca79.html#gae01542303dce69c4a8a00695e484ca79">cvxMsgDisp</a>(<span class="stringliteral">&quot;Hello world!&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__zwapi__cmd_ga79b1a42f1843987caa3d2f849cbc3c43_html_ga79b1a42f1843987caa3d2f849cbc3c43"><div class="ttname"><a href="group__zwapi__cmd_ga79b1a42f1843987caa3d2f849cbc3c43.html#ga79b1a42f1843987caa3d2f849cbc3c43">cvxCmdFuncUnload</a></div><div class="ttdeci">ZW_API_C evxErrors cvxCmdFuncUnload(const vxName Name)</div></div>
<div class="ttc" id="agroup__zwapi__cmd_gac273a1d9868ad996470c1c9502fb061e_html_gac273a1d9868ad996470c1c9502fb061e"><div class="ttname"><a href="group__zwapi__cmd_gac273a1d9868ad996470c1c9502fb061e.html#gac273a1d9868ad996470c1c9502fb061e">cvxCmdFunc</a></div><div class="ttdeci">ZW_API_C evxErrors cvxCmdFunc(const vxName Name, void *Function, double Code)</div></div>
<div class="ttc" id="agroup__zwapi__message_gae01542303dce69c4a8a00695e484ca79_html_gae01542303dce69c4a8a00695e484ca79"><div class="ttname"><a href="group__zwapi__message_gae01542303dce69c4a8a00695e484ca79.html#gae01542303dce69c4a8a00695e484ca79">cvxMsgDisp</a></div><div class="ttdeci">ZW_API_C void cvxMsgDisp(const char *Text)</div></div>
<div class="ttc" id="azwapi__cmd_8h_html"><div class="ttname"><a href="zwapi__cmd_8h.html">zwapi_cmd.h</a></div></div>
<div class="ttc" id="azwapi__message_8h_html"><div class="ttname"><a href="zwapi__message_8h.html">zwapi_message.h</a></div></div>
</div><!-- fragment --><p ><b>4</b>) Create another text file named "MyLib.def" in "MyFolder". This file must specify all functions "exported" by your library. Type the following text in it. <br  />
</p>
<ul>
<li>LIBRARY MyLib.dll</li>
<li>EXPORTS</li>
<li>MyLibInit</li>
<li>MyLibExit</li>
<li>MyFunction</li>
</ul>
<p ><b>5</b>) Build MyLib.dll using the following commands:</p>
<div class="fragment"><div class="line">cl.exe /nologo /c /MT /LD /Z7 MyLib.c</div>
<div class="line">link /DEF:MyLib.def /DLL /OUT:MyLib.dll *.obj zw3dmain.lib</div>
</div><!-- fragment --><p ><b>6</b>) Copy MyLib.dll from "MyFolder" to a sub-folder named "apilibs" in your ZW3D user folder or main ZW3D program folder. The paths to these folders are shown at the bottom of the first tab of the ZW3D Configuration menu (see Utilities/Configuration... or Help/About...).</p>
<p ><b>7</b>) Start ZW3D. It will automatically load DLL's found in an "apilibs" folder.</p>
<p ><b>8</b>) Type "~MyFunction" at the ZW3D command line. ZW3D invokes MyFunction(), which prints "Hello World" in the ZW3D message area. This command string (~MyFunction) can be assigned to an icon or button on a custom toolbar. An example showing how to register a custom toolbar with ZW3D is given later in this section.</p>
<p >Please refer to <a class="el" href="_frequently_asked_questions.html">Frequently Asked Questions</a> page for more details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr>
<table border="0">
<tr>
<td>
  <address><small>Generated at Tue Feb 18 2025 09:15:16 for the <a href="http://www.openscenegraph.org/">ZWAPIOPEN</a></small></address>
<!-- Dimitri van Heesch's e-mail address removed, lest he get messages on the OpenSceneGraph -->
</td>
</tr></table>
</body>
</html>